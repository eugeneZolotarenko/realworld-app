(this["webpackJsonprealworld-app"]=this["webpackJsonprealworld-app"]||[]).push([[0],{28:function(e,t,a){e.exports=a(44)},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),s=a.n(c),o=a(5);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(47),l=a(1),i=a.n(l),m=a(2),p=a(49),f=a(48),d=a(17),v=Object(d.a)(),h=a(24),b=a(19),g=a(26),E=a.n(g);function k(){var e=Object(h.a)(["\n  display: block;\n  margin: 30px auto;\n  height: 70px;\n  width: 70px;\n  align-self: center;\n"]);return k=function(){return e},e}var N=Object(b.css)(k());function x(){return r.a.createElement(E.a,{css:N,size:150,color:"#5cb85c",loading:!0})}function y(){return r.a.createElement("div",{style:{display:"flex",height:"100vh"}},r.a.createElement(x,null))}var j=a(12),O="https://conduit.productionready.io/api",w=function(e){return e?{authorization:"Token ".concat(encodeURIComponent(e))}:{}},C=function(e){return"limit=".concat(10,"&offset=").concat(1===e?0:10*(e-1))},S={createArticle:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,r=t.body,c=t.tagList,s=t.token,e.prev=1,e.next=4,fetch("".concat(O,"/articles"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Token ".concat(encodeURIComponent(s))},body:JSON.stringify({article:{title:a,description:n,body:r,tagList:c}})});case 4:return o=e.sent,e.next=7,o.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),editArticle:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r,c,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,r=t.body,c=t.tagList,s=t.token,o=t.slug,e.prev=1,e.next=4,fetch("".concat(O,"/articles/").concat(o),{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Token ".concat(encodeURIComponent(s))},body:JSON.stringify({article:{title:a,description:n,body:r,tagList:c}})});case 4:return u=e.sent,e.next=7,u.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),deleteArticle:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles/").concat(t,"/"),{method:"DELETE",headers:{"Content-Type":"application/json",authorization:"Token ".concat(encodeURIComponent(a))}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles/").concat(t),{method:"GET",headers:w(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,c=r.article,e.abrupt("return",{article:c,status:n.status});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles?").concat(C(t)),{method:"GET",headers:w(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),filterByTag:function(){var e=Object(m.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles?tag=").concat(a,"&").concat(C(t)),{method:"GET",headers:w(n)});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),filterByAuthor:function(){var e=Object(m.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles?author=").concat(a,"&").concat(C(t)),{method:"GET",headers:w(n)});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),filterByUserFavorited:function(){var e=Object(m.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles?favorited=").concat(a,"&").concat(C(t)),{method:"GET",headers:w(n)});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),getFeeds:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles/feed?").concat(C(t)),{method:"GET",headers:{authorization:"Token ".concat(encodeURIComponent(a))}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),getTags:function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/tags"),{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),loveIt:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles/").concat(t,"/favorite"),{method:"POST",headers:{authorization:"Token ".concat(encodeURIComponent(a))}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),unLoveIt:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles/").concat(t,"/favorite"),{method:"DELETE",headers:{authorization:"Token ".concat(encodeURIComponent(a))}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()},T=Object(j.b)({name:"articles",initialState:{articles:[],count:0,pages:[0],page:1,tag:"",author:"",userFavorited:"",isFeed:!1,isLoading:!1,isError:!1},reducers:{setArticlesData:function(e,t){e.isError=!1,e.articles=t.payload.articles,e.count=t.payload.articlesCount,e.pages=Array.from({length:Math.ceil(t.payload.articlesCount/10)},(function(e,t){return t+1})),e.isLoading=!1},setArticlesPage:function(e,t){e.page=t.payload},setArticlesTag:function(e,t){e.isFeed=!1,e.author="",e.userFavorited="",e.page=1,e.tag=t.payload},setArticlesAuthor:function(e,t){e.isFeed=!1,e.tag="",e.userFavorited="",e.page=1,e.author=t.payload},setArticlesUserFavorited:function(e,t){e.isFeed=!1,e.tag="",e.author="",e.page=1,e.userFavorited=t.payload},setArticlesFeed:function(e,t){e.tag="",e.author="",e.userFavorited="",e.page=1,e.isFeed=t.payload},setLoading:function(e,t){e.isLoading=t.payload},setError:function(e,t){e.isError=t.payload}}}),F=T.actions,A=F.setArticlesData,U=F.setArticlesPage,L=F.setArticlesTag,P=F.setArticlesAuthor,I=F.setArticlesUserFavorited,D=F.setArticlesFeed,R=F.setLoading,z=F.setError,B=T.reducer,G=a(4),J=a(46);var M=function(e){var t=e.article,a=e.currentUser,c=Object(n.useState)(t.favoritesCount),s=Object(G.a)(c,2),o=s[0],u=s[1],l=Object(n.useState)(t.favorited),p=Object(G.a)(l,2),f=p[0],d=p[1],h=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=7;break}return d(!0),u(o+1),e.next=5,S.loveIt(t.slug,a.token);case 5:e.next=11;break;case 7:return d(!1),u(o-1),e.next=11,S.unLoveIt(t.slug,a.token);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"article-preview"},r.a.createElement("div",{className:"article-meta"},r.a.createElement(J.a,{to:"/profile/".concat(t.author.username)},r.a.createElement("img",{src:t.author.image,alt:t.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(J.a,{to:"/profile/".concat(t.author.username),className:"author"},t.author.username),r.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),r.a.createElement("button",{className:f?"btn btn-outline-primary btn-sm pull-xs-right active":"btn btn-outline-primary btn-sm pull-xs-right",onClick:function(){a.token?h():v.push("/register")}},r.a.createElement("i",{className:"ion-heart"})," ",o)),r.a.createElement(J.a,{to:"/article/".concat(t.slug),className:"preview-link"},r.a.createElement("h1",null,t.title),r.a.createElement("p",null,t.description),r.a.createElement("span",null,"Read more...")))},W=a(10);var Y=function(e){var t=e.eachPage,a=e.page,n=e.setArticlesPage,c=Object(o.b)();return r.a.createElement("li",{key:t,className:t===a?"page-item active":"page-item"},r.a.createElement("button",{onClick:function(){return c(n(t))},className:"page-link"},t))};function H(e){return Math.ceil(e/100*7)}var q=function(e){var t=e.page,a=e.pages,c=e.isLoading,s=Object(n.useRef)(0),u=Object(n.useRef)(7),l=Object(o.b)();Object(n.useEffect)((function(){a&&function(e){var t=e.page,a=e.pages,n=e.to,r=e.from;r.current=Math.floor(t-3.5),n.current=Math.floor(t+3.5),t>=a.length-H(40)&&(r.current=a.length-7,n.current=a.length),t<=H(40)&&(r.current=0,n.current=7)}({page:t,pages:a,to:u,from:s})}),[t,a]);var i={display:c?"none":"flex",justifyContent:"center"};return r.a.createElement(r.a.Fragment,null,!c&&a.length>1&&r.a.createElement("nav",{style:i},r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{onClick:function(){l(U(1)),a.length>7&&(s.current=0,u.current=7)},style:{display:s.current>0?"block":"none"},className:"page-link"},"<< 1"),r.a.createElement("button",{onClick:function(){l(U(t-1)),0!==s.current&&a.length>7&&(s.current=s.current-1,u.current=u.current-1)},style:{display:1!==t?"block":"none"},className:"page-link"},"<")),a.length<=7&&a.map((function(e){return r.a.createElement(Y,{key:e,eachPage:e,page:t,setArticlesPage:U})})),a.length>7&&Object(W.a)(a).slice(s.current,u.current).map((function(e){return r.a.createElement(Y,{key:e,eachPage:e,page:t,setArticlesPage:U})})),r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{onClick:function(){l(U(t+1)),a.length>7&&(s.current=s.current+1,u.current=u.current+1)},style:{display:t!==a.length?"block":"none"},className:"page-link"},">")),r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{onClick:function(){l(U(a.length)),a.length>7&&(s.current=a.length-7,u.current=a.length)},style:{display:t<a.length-H(40)?"block":"none"},className:"page-link"},a.length," >>")))))};var K=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})),a=t.articlesData,c=t.user,s=v.location;return Object(n.useEffect)((function(){var t,n,r;a.tag?e((t=a.page,n=a.tag,r=c.token,function(){var e=Object(m.a)(i.a.mark((function e(a){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(R(!0)),e.prev=1,e.next=4,S.filterByTag(t,n,r);case 4:c=e.sent,a(A(c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a(z(!0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())):a.author&&s.pathname.includes("profile")?e(function(e,t,a){return function(){var n=Object(m.a)(i.a.mark((function n(r){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(R(!0)),n.prev=1,n.next=4,S.filterByAuthor(e,t,a);case 4:c=n.sent,r(A(c)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(z(!0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}(a.page,a.author,c.token)):a.userFavorited&&s.pathname.includes("profile")?e(function(e,t,a){return function(){var n=Object(m.a)(i.a.mark((function n(r){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(R(!0)),n.prev=1,n.next=4,S.filterByUserFavorited(e,t,a);case 4:c=n.sent,r(A(c)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(z(!0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}(a.page,a.userFavorited,c.token)):a.isFeed&&c.token?e(function(e,t){return function(){var a=Object(m.a)(i.a.mark((function a(n){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(R(!0)),a.prev=1,a.next=4,S.getFeeds(e,t);case 4:r=a.sent,n(A(r)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),n(z(!0));case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}(a.page,c.token)):e(function(e,t){return function(){var a=Object(m.a)(i.a.mark((function a(n){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(R(!0)),a.prev=1,a.next=4,S.getAll(e,t);case 4:r=a.sent,n(A(r)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),n(z(!0));case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}(a.page,c.token))}),[e,a.page,a.tag,a.author,a.userFavorited,a.isFeed,c.token,s]),a.isError?r.a.createElement("p",null,"Error!"):a.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement(q,{page:a.page,pages:a.pages,isLoading:a.isLoading})):0===a.articles.length?r.a.createElement("p",null,"No Articles yet"):r.a.createElement(r.a.Fragment,null,a.articles.map((function(e,t){return r.a.createElement(M,{article:e,currentUser:c,key:t})})),r.a.createElement(q,{page:a.page,pages:a.pages,isLoading:a.isLoading}))};var $=function(){var e=Object(n.useState)(),t=Object(G.a)(e,2),a=t[0],c=t[1],s=Object(o.b)();return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getTags();case 2:t=e.sent,a=t.tags,c(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a&&a.length?r.a.createElement("div",{className:"tag-list"},a.map((function(e,t){return r.a.createElement("button",{onClick:function(){s(L(e))},key:t,className:"tag-pill tag-default"},e)}))):r.a.createElement(x,null)};var Q=function(e){var t=e.location,a=e.userName,n=Object(o.b)(),c=Object(o.c)((function(e){return e})),s=c.articlesData,u=c.user;return"profile"===t&&a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"articles-toggle"},r.a.createElement("ul",{className:"nav nav-pills outline-active"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:s.author?"nav-link active":"nav-link",onClick:function(){n(P(a))}},"My Articles")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:s.userFavorited?"nav-link active":"nav-link",onClick:function(){n(I(a))}},"Favorited Articles"))))):r.a.createElement(r.a.Fragment,null,"home"===t&&r.a.createElement("div",{className:"feed-toggle"},r.a.createElement("ul",{className:"nav nav-pills outline-active"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{style:{display:u.token?"block":"none"},className:s.isFeed?"nav-link active":"nav-link",onClick:function(){n(D(!0))}},"Your Feed")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:s.tag||s.isFeed?"nav-link":"nav-link active",onClick:function(){n(D(!1))}},"Global Feed")),r.a.createElement("li",{style:{display:s.tag?"block":"none"},className:"nav-item"},r.a.createElement("button",{className:s.tag?"nav-link active":"nav-link"},r.a.createElement("i",{className:"ion-pound"})," ",s.tag)))))};var V=function(){return r.a.createElement("div",{className:"home-page"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"logo-font"},"conduit"),r.a.createElement("p",null,"A place to share your knowledge."))),r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement(Q,{location:"home",userName:""}),r.a.createElement(K,null)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("p",null,"Popular Tags"),r.a.createElement($,null))))))},X={register:function(){var e=Object(m.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:t,email:a,password:n}})});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),login:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:t,password:a}})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",{status:n.status,user:r.user});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r,c,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.username,r=t.password,c=t.image,s=t.bio,o=t.token,e.prev=1,e.next=4,fetch("".concat(O,"/user"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(encodeURIComponent(o))},body:JSON.stringify({user:{email:a,username:n,password:r,image:c,bio:s}})});case 4:return u=e.sent,e.next=7,u.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),currentUser:function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/user",{method:"GET",headers:{Authorization:"Token ".concat(encodeURIComponent(t))}});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),getProfile:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/profiles/").concat(t),{method:"GET",headers:w(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,c=r.profile,e.abrupt("return",{profile:c,status:n.status});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}(),followUser:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/profiles/").concat(t,"/follow"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(encodeURIComponent(a))}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),unFollowUser:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/profiles/").concat(t,"/follow"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(encodeURIComponent(a))}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},Z=Object(j.b)({name:"user",initialState:{isLoading:!1,isError:!1,image:"",email:"",username:"",bio:"",token:""},reducers:{setCurrentUser:function(e,t){e.image=t.payload.image,e.email=t.payload.email=t.payload.email,e.username=t.payload.username,e.bio=t.payload.bio,e.token=t.payload.token,e.isError=!1},logoutUser:function(e){e.image="",e.email="",e.username="",e.bio="",e.token="",v.push("/")},setImage:function(e,t){e.image=t.payload},setEmail:function(e,t){e.email=t.payload},setUsername:function(e,t){e.username=t.payload},setBio:function(e,t){e.bio=t.payload},setLoading:function(e,t){e.isLoading=t.payload},setError:function(e,t){e.isError=t.payload}}}),_=function(e,t){return function(){var a=Object(m.a)(i.a.mark((function a(n){var r,c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(oe(!0)),a.prev=1,a.next=4,X.login(e,t);case 4:r=a.sent,c=r.user,200!==r.status?n(ue(!0)):(v.push("/"),n(te(c))),n(oe(!1)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()},ee=Z.actions,te=ee.setCurrentUser,ae=ee.setImage,ne=ee.setEmail,re=ee.setUsername,ce=ee.setBio,se=ee.logoutUser,oe=ee.setLoading,ue=ee.setError,le=Z.reducer;var ie=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),u=Object(G.a)(s,2),l=u[0],p=u[1],f=Object(o.b)(),d=Object(o.c)((function(e){return e})).user;return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign in"),d.isError&&r.a.createElement("p",{className:"error-messages"},"Email or password are invalid"),r.a.createElement("form",{onSubmit:function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),f(_(a,l));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",onChange:function(e){c(e.target.value),f(ue(!1))}})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",onChange:function(e){p(e.target.value),f(ue(!1))}})),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary pull-xs-right",disabled:!!d.isLoading},"Sign in"))))))};var me=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),u=Object(G.a)(s,2),l=u[0],p=u[1],f=Object(n.useState)(""),d=Object(G.a)(f,2),h=d[0],b=d[1],g=Object(o.b)(),E=Object(o.c)((function(e){return e})).user;return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign up"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(J.a,{to:"/login"},"Have an account?")),!a&&!l&&!h&&r.a.createElement("p",{className:"error-messages"},"Email, Password and User Name are required"),E.isError&&r.a.createElement("p",{className:"error-messages"},"Email or password are invalid"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g(function(e){var t=e.userName,a=e.email,n=e.password;return function(){var e=Object(m.a)(i.a.mark((function e(r){var c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(oe(!0)),e.prev=1,e.next=4,X.register(t,a,n);case 4:c=e.sent,s=c.user,200!==c.status?r(ue(!0)):(v.push("/"),r(te(s))),r(oe(!1)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}({userName:a,email:l,password:h}))}},r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Your Name",value:a,onChange:function(e){c(e.target.value),g(ue(!1))}})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Email",value:l,onChange:function(e){p(e.target.value),g(ue(!1))}})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",value:h,onChange:function(e){b(e.target.value),g(ue(!1))}})),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary pull-xs-right",disabled:!!E.isLoading},"Sign up"))))))};var pe=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})).user,a=t.email,c=t.username,s=t.image,u=t.bio,l=t.token,p=Object(n.useState)(""),f=Object(G.a)(p,2),d=f[0],v=f[1],h=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,X.updateUser({email:a,username:c,password:d,image:s,bio:u,token:l});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"settings-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Your Settings"),r.a.createElement("form",{onSubmit:h},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",value:s,onChange:function(t){return e(ae(t.target.value))},placeholder:"URL of profile picture"})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",value:c,onChange:function(t){return e(re(t.target.value))},placeholder:"Your Name"})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("textarea",{className:"form-control form-control-lg",rows:8,value:u,onChange:function(t){return e(ce(t.target.value))},placeholder:"Short bio about you"})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",value:a,onChange:function(t){return e(ne(t.target.value))},placeholder:"Email"})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",value:d,onChange:function(e){return v(e.target.value)},placeholder:"Password"})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit"},"Update Settings"))),r.a.createElement("hr",null),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return e(se())}},"Or click here to logout.")))))},fe=function(e){return e.replace("editor","").replace(/\//g,"")};var de=function(){var e=Object(n.useState)(""),t=Object(G.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),u=Object(G.a)(s,2),l=u[0],p=u[1],f=Object(n.useState)(""),d=Object(G.a)(f,2),h=d[0],b=d[1],g=Object(n.useState)([]),E=Object(G.a)(g,2),k=E[0],N=E[1],x=Object(n.useState)(""),y=Object(G.a)(x,2),j=y[0],O=y[1],w=Object(n.useState)(fe(v.location.pathname)),C=Object(G.a)(w,2),T=C[0],F=C[1],A=Object(n.useState)(!1),U=Object(G.a)(A,2),L=U[0],P=U[1],I=Object(n.useState)(!1),D=Object(G.a)(I,2),R=D[0],z=D[1],B=Object(o.c)((function(e){return e})).user;Object(n.useEffect)((function(){return v.listen((function(e){fe(e.pathname)?F(fe(e.pathname)):(b(""),N([]),p(""),c(""),F(""))}))}),[]),Object(n.useEffect)((function(){T&&function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getOne(T,B.token);case 2:t=e.sent,a=t.article,200===t.status?(b(a.body),N(a.tagList),p(a.description),c(a.title)):v.push("/");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[B.token,T]);var J=function(){var e=Object(m.a)(i.a.mark((function e(){var t,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z(!0),!(a&&l&&h)){e.next=17;break}if(T){e.next=10;break}return e.next=5,S.createArticle({title:a,description:l,body:h,tagList:k,token:B.token});case 5:t=e.sent,n=t.article,v.push("/article/".concat(n.slug)),e.next=15;break;case 10:return e.next=12,S.editArticle({title:a,description:l,body:h,tagList:k,token:B.token,slug:T});case 12:r=e.sent,c=r.article,v.push("/article/".concat(c.slug));case 15:e.next=18;break;case 17:P(!0);case 18:z(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){j&&(N([].concat(Object(W.a)(k),Object(W.a)(e.target.value.split(",")))),O(""))};return r.a.createElement("div",{className:"editor-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement("form",{onSubmit:function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),J();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Article Title",value:a,onChange:function(e){c(e.target.value),P(!1)}})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"What's this article about?",value:l,onChange:function(e){p(e.target.value),P(!1)}})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",rows:8,placeholder:"Write your article (in markdown)",value:h,onChange:function(e){b(e.target.value),P(!1)}})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter tags",value:j,onKeyDown:function(e){13!==e.keyCode&&188!==e.keyCode||(e.preventDefault(),M(e))},onBlur:function(e){return M(e)},onChange:function(e){return O(e.target.value.split(",").join())}}),r.a.createElement("div",{className:"tag-list"},k.map((function(e,t){return r.a.createElement("span",{key:t,className:"tag-default tag-pill"},r.a.createElement("i",{className:"ion-close-round",onClick:function(){N(Object(W.a)(k).filter((function(e,a){return a!==t})))}}),e)})))),r.a.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",type:"submit",disabled:!!R},T?"Update Article":"Publish Article"))),L&&r.a.createElement("p",{className:"error-messages"},"Title, Description and Body of article cannot be empty")))))},ve={getComments:function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/articles/").concat(t,"/comments"),{method:"GET",headers:w(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,c=r.comments,e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commentText,n=t.slug,r=t.token,e.prev=1,e.next=4,fetch("".concat(O,"/articles/").concat(n,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Token ".concat(encodeURIComponent(r))},body:JSON.stringify({comment:{body:a}})});case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),deleteComment:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.slug,r=t.token,e.prev=1,e.next=4,fetch("".concat(O,"/articles/").concat(n,"/comments/").concat(a),{method:"DELETE",headers:{"Content-Type":"application/json",authorization:"Token ".concat(encodeURIComponent(r))}});case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()};var he=function(e){var t=e.article,a=e.favorited,n=e.setFavorited,c=e.favoritesCount,s=e.setFavoritesCount,o=e.followedAuthor,u=e.setFollowedAuthor,l=e.user,p=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!a),a){e.next=7;break}return s(c+1),e.next=5,S.loveIt(t.slug,l.token);case 5:e.next=10;break;case 7:return s(c-1),e.next=10,S.unLoveIt(t.slug,l.token);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.token){e.next=11;break}if(u(!o),!o){e.next=7;break}return e.next=5,X.unFollowUser(t.author.username,l.token);case 5:e.next=9;break;case 7:return e.next=9,X.followUser(t.author.username,l.token);case 9:e.next=12;break;case 11:v.push("/register");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"article-meta"},r.a.createElement(J.a,{to:"/profile/".concat(t.author.username)},r.a.createElement("img",{src:t.author.image,alt:t.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(J.a,{to:"/profile/".concat(t.author.username),className:"author"},t.author.username),r.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),l.username!==t.author.username&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:o?"btn btn-sm btn-outline-secondary action-btn active":"btn btn-sm btn-outline-secondary action-btn",onClick:f},r.a.createElement("i",{className:o?"ion-minus-round":"ion-plus-round"}),"\xa0 ",o?"Unfollow":"Follow"," ",t.author.username),"\xa0\xa0",r.a.createElement("button",{className:a?"btn btn-sm btn-outline-primary active":"btn btn-sm btn-outline-primary",onClick:function(){l.token?p():v.push("/register")}},r.a.createElement("i",{className:"ion-heart"}),"\xa0 ",a?"Unfavorite":"Favorite"," Post"," ",r.a.createElement("span",{className:"counter"},"(",c,")"))),l.token&&l.username===t.author.username&&r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{className:"btn btn-outline-secondary btn-sm",to:"/editor/".concat(t.slug)},r.a.createElement("i",{className:"ion-edit"})," Edit Article"),"\xa0\xa0",r.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.deleteArticle(t.slug,l.token),v.push("/");case 2:case"end":return e.stop()}}),e)})))},r.a.createElement("i",{className:"ion-trash-a"})," Delete Article")))};var be=function(e){var t=e.comment,a=e.comments,n=e.setComments,c=e.slug,s=e.user;return r.a.createElement("div",{key:t.id,className:"card"},r.a.createElement("div",{className:"card-block"},r.a.createElement("p",{className:"card-text"},t.body)),r.a.createElement("div",{className:"card-footer"},r.a.createElement(J.a,{to:"/profile/".concat(t.author.username),className:"comment-author"},r.a.createElement("img",{src:t.author.image,className:"comment-author-img",alt:t.author.username})),"\xa0",r.a.createElement(J.a,{to:"/profile/".concat(t.author.username),className:"comment-author"},t.author.username),r.a.createElement("span",{className:"date-posted"},new Date(t.createdAt).toDateString()),s.token&&s.username===t.author.username&&r.a.createElement("span",{className:"mod-options"},r.a.createElement("i",{className:"ion-trash-a",onClick:Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.deleteComment({id:t.id,slug:c,token:s.token});case 2:n(a.filter((function(e){return e.id!==t.id})));case 3:case"end":return e.stop()}}),e)})))}))))};var ge=function(e){var t=e.user,a=e.comments,c=e.setComments,s=e.slug,o=Object(n.useState)(""),u=Object(G.a)(o,2),l=u[0],p=u[1],f=Object(n.useState)(""),d=Object(G.a)(f,2),v=d[0],h=d[1],b=function(){var e=Object(m.a)(i.a.mark((function e(n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!l){e.next=10;break}return e.next=4,ve.addComment({commentText:l,slug:s,token:t.token});case 4:r=e.sent,o=r.comment,c([o].concat(Object(W.a)(a))),p(""),e.next=12;break;case 10:h("Comment cannot be empty"),setTimeout((function(){h("")}),2500);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"card comment-form"},r.a.createElement("div",{className:"card-block"},r.a.createElement("textarea",{className:"form-control",placeholder:"Write a comment...",rows:3,value:l,onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",{className:"card-footer"},r.a.createElement("img",{src:t.image,className:"comment-author-img",alt:t.username}),r.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:b},"Post Comment"))),r.a.createElement("p",{className:"error-messages"},v))};var Ee=function(){var e=Object(n.useState)(v.location.pathname.replace("article","").replace(/\//g,"")),t=Object(G.a)(e,1)[0],a=Object(n.useState)(),c=Object(G.a)(a,2),s=c[0],u=c[1],l=Object(n.useState)(0),p=Object(G.a)(l,2),f=p[0],d=p[1],h=Object(n.useState)(!1),b=Object(G.a)(h,2),g=b[0],E=b[1],k=Object(n.useState)(!1),N=Object(G.a)(k,2),x=N[0],j=N[1],O=Object(n.useState)(),w=Object(G.a)(O,2),C=w[0],T=w[1],F=Object(o.c)((function(e){return e})).user;return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getOne(t,F.token);case 2:a=e.sent,n=a.article,200===a.status?(u(n),d(n.favoritesCount),E(n.favorited),j(n.author.following)):v.push("/");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=T,e.next=3,ve.getComments(t,F.token);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){a.apply(this,arguments)}()}),[F.token,t]),s&&C?r.a.createElement("div",{className:"article-page"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,s.title),r.a.createElement(he,{article:s,favorited:g,setFavorited:E,favoritesCount:f,setFavoritesCount:d,followedAuthor:x,setFollowedAuthor:j,user:F}))),r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row article-content"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("p",null,s.body),r.a.createElement("ul",{className:"tag-list"},s.tagList.map((function(e){return r.a.createElement("li",{className:"tag-default tag-pill tag-outline ng-binding ng-scope"},e)}))))),r.a.createElement("hr",null),r.a.createElement("div",{className:"article-actions"},r.a.createElement(he,{article:s,favorited:g,setFavorited:E,favoritesCount:f,setFavoritesCount:d,followedAuthor:x,setFollowedAuthor:j,user:F})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},F.token&&r.a.createElement(ge,{slug:t,comments:C,setComments:T,user:F}),C.map((function(e){return r.a.createElement(be,{comment:e,comments:C,setComments:T,slug:t,user:F})})))))):r.a.createElement(y,null)},ke=function(e){return e.replace("profile","").replace(/\//g,"")};var Ne=function(){var e=Object(o.c)((function(e){return e})).user,t=Object(n.useState)(),a=Object(G.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)(),l=Object(G.a)(u,2),p=l[0],f=l[1],d=Object(n.useState)(ke(v.location.pathname)),h=Object(G.a)(d,2),b=h[0],g=h[1],E=Object(o.b)();return Object(n.useEffect)((function(){return v.listen((function(e){g(ke(e.pathname))}))}),[]),Object(n.useEffect)((function(){function t(){return(t=Object(m.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.getProfile(b,e.token);case 2:a=t.sent,n=a.profile,200===a.status?(s(n),f(n.following)):v.push("/");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}E(P(b)),function(){t.apply(this,arguments)}()}),[e.token,b,E]),c?r.a.createElement("div",{className:"profile-page"},r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("img",{src:c.image,className:"user-img",alt:c.username}),r.a.createElement("h4",null,c.username),r.a.createElement("p",null,c.bio),e.token&&e.username===c.username&&r.a.createElement(J.a,{className:"btn btn-sm btn-outline-secondary action-btn",to:"/settings"},r.a.createElement("i",{className:"ion-gear-a"})," Edit Profile Settings"),e.token&&e.username!==c.username&&r.a.createElement("button",{className:p?"btn btn-sm btn-outline-secondary action-btn active":"btn btn-sm btn-outline-secondary action-btn",onClick:Object(m.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f(!p),!p){t.next=6;break}return t.next=4,X.unFollowUser(c.username,e.token);case 4:t.next=8;break;case 6:return t.next=8,X.followUser(c.username,e.token);case 8:case"end":return t.stop()}}),t)})))},r.a.createElement("i",{className:p?"ion-minus-round":"ion-plus-round"}),"\xa0 ",p?"Unfollow":"Follow"," ",c.username))))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement(Q,{location:"profile",userName:c.username}),r.a.createElement(K,null))))):r.a.createElement(y,null)};var xe=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e})).user;return r.a.createElement("nav",{className:"navbar navbar-light"},r.a.createElement("div",{className:"container"},r.a.createElement(J.a,{className:"navbar-brand",to:"/"},"conduit"),r.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link active",to:"/"},"Home")),t.token&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link",to:"/editor"},r.a.createElement("i",{className:"ion-compose"}),"\xa0New Article")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link",to:"/settings"},r.a.createElement("i",{className:"ion-gear-a"}),"\xa0Settings")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link",to:"/profile/".concat(t.username),onClick:function(){e(P(t.username))}},t.username))),!t.token&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link",to:"/login"},"Sign in")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{className:"nav-link",to:"/register"},"Sign up"))))))};var ye=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement("a",{href:"/",className:"logo-font"},"conduit"),r.a.createElement("span",{className:"attribution"},"An interactive learning project from"," ",r.a.createElement("a",{href:"https://thinkster.io"},"Thinkster"),". Code & design licensed under MIT.")))};var je=function(){var e=Object(o.c)((function(e){return e})).user;return Object(n.useEffect)((function(){e.token&&function(){var t=Object(m.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X.currentUser(e.token);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),r.a.createElement("div",{className:"App"},r.a.createElement(xe,null),r.a.createElement(p.a,null,r.a.createElement(f.a,{exact:!0,path:"/",component:V}),r.a.createElement(f.a,{path:"/login",component:ie}),r.a.createElement(f.a,{path:"/register",component:me}),r.a.createElement(f.a,{path:"/settings",component:pe}),r.a.createElement(f.a,{path:"/editor",component:de}),r.a.createElement(f.a,{path:"/article",component:Ee}),r.a.createElement(f.a,{path:"/profile",component:Ne})),r.a.createElement(ye,null))},Oe=a(7),we=Object(Oe.c)({user:le,articlesData:B}),Ce=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(a){return}}("state"),Se=Object(j.a)({reducer:we,preloadedState:Ce});Se.subscribe((function(){return function(e,t){try{var a=JSON.stringify(e);localStorage.setItem(t,a)}catch(n){console.error(n)}}({user:Se.getState().user},"state")})),s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:Se},r.a.createElement(u.a,{history:v},r.a.createElement(je,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.1276e158.chunk.js.map